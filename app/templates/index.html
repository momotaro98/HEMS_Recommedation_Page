{% extends "layout.html" %}

{% block page_content %}

<div class="panel panel-success" id="header_text">
    <div class="panel-heading">
        <h2>こんにちは。{{ current_user.username }}様</h2>
    </div><!-- panel-heading -->
    <div class="panel-body">
        <h3>{{ dt_reco.bottom_datetime_month }}月{{ dt_reco.bottom_datetime_day }}日({{ dt_reco.bottom_datetime_yobi }})から{{ dt_reco.top_datetime_month }}月{{ dt_reco.top_datetime_day }}日({{ dt_reco.top_datetime_yobi }})の1週間分のデータによるレコメンドレポートです。ご確認ください。</h3>

        <h3>また実験協力としてレコメンドレポートに目を通していただいた後、以下のリンクからアンケートにご協力いただけますよう、お願いいたします。</h3>
    </div><!-- panel-body -->
</div><!-- #header_text -->
<h3><a href="https://docs.google.com/forms/d/e/1FAIpQLSey4LF3PwnmjwxMUNWxFz2WSk11IRPvF1r6lVoGpg8VsG9SUg/viewform">アンケート回答ページ</a></h3>

<ul class="list-group">
    <li class="list-group-item">
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="col-md-4">
                    <div class="panel panel-default recommend">
                        <div class="panel-heading">
                            <h3>①エアコン設定温度変更レコメンド</h3>
                        </div><!-- .panel-heading -->
                        <div class="panel-body">
                            <p>あなたのご家庭では、この1週間、設定温度<strong>{{ settemp_graph.make_frequent_temperature()|safe }}℃</strong>で最も多くエアコンが運転していました。</p>
                            {% if is_preday_existed %}
                            <p>また、昨日は設定温度<strong>{{ oneday_settemp_graph.make_frequent_temperature()|safe }}℃</strong>で最も多くエアコンが運転していました。</p>
                            {% endif %}
                            {% if settemp_graph.make_frequent_temperature() > 20 %}
                            <p>設定温度をそれよりも低い<strong>{{ settemp_graph.make_recommend_temperature_winter()|safe }}℃</strong>にしてみてはいかがでしょうか。(※ 環境省による冬場のエアコン推奨設定温度は<strong>20℃</strong>です)</p>
                            <p>暖房の設定温度を2℃下げると平均的に月額約1,600円ほど電気代が安くなります。</p>
                            {% else %}
                            <p>現在の設定温度を維持していただくようお願いいたします。</p>
                            {% endif %}
                        </div><!-- .panel-body -->
                    </div><!-- .recommend -->
                </div><!-- .col -->
                <div class="col-md-8 graph">
                    <canvas id="settemp"></canvas>
                </div><!-- .col -->
            </div><!-- .row -->
        </div><!-- .container -->
    </li><!-- .list-group-item -->

    <li class="list-group-item">
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="col-md-4">
                    <div class="panel panel-default recommend">
                        <div class="panel-heading">
                            <h3>②エアコン使用時間の多い曜日における扇風機利用レコメンド</h3>
                        </div><!-- .panel-heading -->
                        <div class="panel-body">
                            <!--
                            <p>あなたのご家庭では、この1週間、{{ totaltime_graph.make_top1_weekday()|safe }}曜日・{{ totaltime_graph.make_top2_weekday()|safe }}曜日でのエアコン利用が多いです。</p>
                            -->
                            <p>あなたのご家庭では、この1週間における1日あたりの平均エアコン運転時間は<strong>X時間X分</strong>でした。</p>
                            {% if is_preday_existed %}
                            <p>また、昨日のエアコン運転時間は<strong>X時間X分</strong>でした。</p>
                            {% endif %}
                            <p>昼間に日光を部屋に入れたり早く就寝するなどして普段よりも1時間だけエアコンの利用を控えてはいかがでしょう。</p>
                            <p>1日1時間エアコン使用時間を減らすと平均的に月額約600円ほど電気代が安くなります。</p>
                        </div><!-- .panel-body -->
                    </div><!-- .recommend -->
                </div><!-- .col -->
                <div class="col-md-8 graph">
                    <canvas id="totaltime"></canvas>
                </div><!-- .col -->
            </div><!-- .row -->
        </div><!-- .container -->
    </li><!-- .list-group-item -->

    <li class="list-group-item">
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="col-md-4">
                    <div class="panel panel-default recommend">
                        <div class="panel-heading">
                            <h3>③日中エアコン使用変更レコメンド</h3>
                        </div><!-- .panel-heading -->
                        <div class="panel-body">
                            <p>冬季の日中の節電にご協力お願い致します！</p>
                            <p>冬場での東京電力管内で電力ピークが発生しやすいのは朝の10時台です。</p>
                            <p>あなたのご家庭では、この1週間の内、10時におけるエアコン利用率は{{ perhour_graph.find_a_certain_hour_value(10)|safe }}%でした。</p>
                            {% if is_preday_existed %}
                            {% if oneday_perhour_graph.find_a_certain_hour_value(10) %}
                            <p>また、昨日は10時にエアコンが運転していました。</p>
                            {% endif %}
                            {% endif %}
                            <p>節電協力としてこの辺りの時間帯にエアコンを消してお買い物等外出してみてはいかがでしょう。</p>
                        </div><!-- .panel-body -->
                    </div><!-- .recommend -->
                </div><!-- .col -->
                <div class="col-md-8 graph">
                    <canvas id="perhour"></canvas>
                </div><!-- .col -->
            </div><!-- .row -->
        </div><!-- .container -->
    </li><!-- .list-group-item -->
</ul><!-- .list-group -->

<div id="footer_text">
<h3>以下のリンクからアンケートにご協力いただけますよう、よろしくお願い致します。</h3>
<h3><a href="https://docs.google.com/forms/d/e/1FAIpQLSey4LF3PwnmjwxMUNWxFz2WSk11IRPvF1r6lVoGpg8VsG9SUg/viewform">アンケート回答ページ</a></h3>
</div><!-- #footer_text -->

{% block scripts %}
{{ super() }}
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.2.2/Chart.min.js"></script>
<script>
    // 1つ目のグラフ用データ 設定温度
	// var settemp_lables = ["18℃", "19℃", "20℃", "21℃", "22℃", "23℃", "24℃", "25℃", "26℃", "27℃", "28℃", "29℃", "30℃"];
    var settemp_lables = {{ settemp_graph.horizontal_axis|safe }};
    // var settemp_data = [0, 0, 0, 0, 0, 0, 0, 30, 60, 10, 0, 0, 0];
    var settemp_data = {{ settemp_graph.virtical_axis|safe }};

    // 2つ目のグラフ用データ 総稼働時間データ
	//var totaltime_lables = ["8月14日(水)", "8月15日(木)", "8月16日(金)", "8月17日(土)", "8月18日(日)", "8月19日(月)", "8月20日(火)"];
    var totaltime_lables = {{ totaltime_graph.horizontal_axis |safe}};
    // var totaltime_data = [65, 59, 80, 81, 56, 55, 48];
    var totaltime_data = {{ totaltime_graph.virtical_axis|safe }};

    // 3つ目のグラフ用データ 単位時間毎利用率データ
    // var perhour_lables = ["0:00", "1:00", "2:00", "3:00", "4:00", "5:00", "6:00", "7:00", "8:00", "9:00", "10:00", "11:00", "12:00", "13:00", "14:00", "15:00", "16:00", "17:00", "18:00", "19:00", "20:00", "21:00", "22:00", "23:00",];
    var perhour_lables = {{ perhour_graph.horizontal_axis|safe }};
    // var perhour_data = [90, 19, 13, 32, 2, 12, 50, 90, 19, 13, 32, 2, 12, 50, 90, 19, 13, 32, 2, 12, 50, 90, 19, 13, 32, 2, 12, 50];
    var perhour_data = {{ perhour_graph.virtical_axis|safe }};

</script>
<script src="/static/js/graphs.js"></script>
{% endblock %}

{% endblock %}
